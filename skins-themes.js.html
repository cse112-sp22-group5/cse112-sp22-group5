<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>skins-themes.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#@type">@type</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#breakReminders">breakReminders</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#calcTimer">calcTimer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#checkState">checkState</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CLASSICAL_TRACKS">CLASSICAL_TRACKS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearAllTasks">clearAllTasks</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearCompletedTasks">clearCompletedTasks</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#colorChange">colorChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createCustomTaskTag">createCustomTaskTag</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CURRENT_TRACK_INDX">CURRENT_TRACK_INDX</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CURRENT_TRACKS">CURRENT_TRACKS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#deleteTaskFromLocal">deleteTaskFromLocal</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#expandSideBar">expandSideBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getAlarm">getAlarm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getNotificationStatus">getNotificationStatus</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#hideSettings">hideSettings</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#inputSanitizer">inputSanitizer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isReturningUser">isReturningUser</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#keyboardShortcut">keyboardShortcut</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#loadBackgroundImages">loadBackgroundImages</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadTaskListFromLocal">loadTaskListFromLocal</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#loadThemeFromStorage">loadThemeFromStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#LONG_MINS">LONG_MINS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#minimizeSideBar">minimizeSideBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#onReset">onReset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#onStart">onStart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#playSound">playSound</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#POMO_MINS">POMO_MINS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#removeDataFromStorage">removeDataFromStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#retrieveDataFromStorage">retrieveDataFromStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#revealSettings">revealSettings</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveTask">saveTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveToStorage">saveToStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setBackgroundMusic">setBackgroundMusic</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#setBGFromURL">setBGFromURL</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#setBGImage">setBGImage</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#setCustomTime">setCustomTime</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setDefaultSettings">setDefaultSettings</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#setDefaultThemes">setDefaultThemes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setdivWidth">setdivWidth</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setIconBackGround">setIconBackGround</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setPromoThemes">setPromoThemes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setSideBar">setSideBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTheme">setTheme</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTrackToNext">setTrackToNext</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTrackToPrev">setTrackToPrev</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#SHORT_MINS">SHORT_MINS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showNotif">showNotif</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#storeToLocal">storeToLocal</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#timerCountdown">timerCountdown</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#timerId">timerId</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#toggleMenu">toggleMenu</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateProgress">updateProgress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateState">updateState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateTimer">updateTimer</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#worker">worker</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">skins-themes.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { saveToStorage, retrieveDataFromStorage } from "./localStorage.js";
import { updateProgress } from "./progress-bar.js";

const BackgroundImages = [
  "https://wallpaperaccess.com/full/274198.jpg",
  "https://images.pexels.com/photos/1563356/pexels-photo-1563356.jpeg",
  "https://images.pexels.com/photos/884788/pexels-photo-884788.jpeg",
  "https://images.pexels.com/photos/547114/pexels-photo-547114.jpeg",
];

const Themes = {
  1: "default-theme",
  2: "dark-theme",
  3: "light-theme",
  4: "color-blind",
};

// LocalStorage Key
const promoThemes = "promoThemes";

// LocalStorage Value
const promoThemesSetting = {
  theme: {
    isOn: false,
    source: "",
  },
  backgroundImage: {
    isOn: false,
    source: "",
  },
};

/**
 * @name setPromoThemes
 * @function
 * @description Set the correct theme and return an object that stores this infomation
 * @param {string} type type of theme, is it from theme or background images
 * @param {string} value value or source of this theme
 * @returns an object that stores this infomation about themes
 */
function setPromoThemes(type, value) {
  const promoThemesCopy = JSON.parse(JSON.stringify(promoThemesSetting));
  promoThemesCopy[type]["isOn"] = true;
  promoThemesCopy[type]["source"] = value;
  return promoThemesCopy;
}

/**
 * @name setTheme
 * @function
 * @description set theme for the app base on user selection
 * @param {HTMLElement} target the target Element
 * @param {string} theme the position of theme in the global variable Themes
 */
function setTheme(target, theme) {
  // turn off color blind mode
  if (theme === "0") {
    // set to seleted theme
    theme = document.querySelector("#theme").value;
  }

  // Turn off color blindness if a theme is chosen
  if (theme !== "4") document.querySelector("#color-blindness").value = "0";

  target.className = Themes[theme];
  updateProgress();
  saveToStorage(promoThemes, setPromoThemes("theme", theme));
}

/**
 * @name loadThemeFromStorage
 * @description load the theme from storage, if user already set a theme or background
 * then change to it, otherwise load the default theme
 */
function loadThemeFromStorage() {
  const target = document.documentElement;
  const loadTheme = retrieveDataFromStorage(promoThemes);
  let radio = undefined;
  target.className = "default-theme";
  for (const key in loadTheme) {
    if (loadTheme[key]["isOn"])
      switch (key) {
        case "theme":
          if (loadTheme[key]["source"] === "4")
            document.getElementById("color-blindness").value = "4";
          else
            document.getElementById("theme").value = loadTheme[key]["source"];

          setTheme(target, loadTheme[key]["source"]);
          break;
        case "backgroundImage":
          document.body.style.backgroundImage = `url('${loadTheme[key]["source"]}')`;
          radio = document.querySelector(
            `input[value='${BackgroundImages.indexOf(
              loadTheme[key]["source"]
            )}']`
          );
          if (radio !== null) radio.checked = true;
          break;
      }
  }
}

/**
 * @name loadBackgroundImages
 * @description load background images for styles/themes panel
 */
function loadBackgroundImages() {
  const container = document.querySelector("#background-images");
  for (let i = 0; i &lt; BackgroundImages.length; i++) {
    let gridItem = `
        &lt;div class='grid-item'>
            &lt;img src='./img/background/bg-${i}.jpg'>
            &lt;input type='radio' value='${i}' name='bgImg'>
        &lt;/div>
        `;
    container.innerHTML += gridItem;
  }
}

/**
 * @name setBGImage
 * @description Add event for background images, so when they are clicked
 * background changes
 */
function setBGImage() {
  document.querySelectorAll("input[name='bgImg']").forEach((img) => {
    img.addEventListener("click", (event) => {
      const index = parseInt(event.target.value, 10);
      document.body.style.backgroundImage = `url('${BackgroundImages[index]}')`;
      saveToStorage(
        promoThemes,
        setPromoThemes("backgroundImage", BackgroundImages[index])
      );
    });
  });
}

/**
 * @name setBGFromURL
 * @description set background image to the URL user input
 * @param {string} url URL to an Image
 */
function setBGFromURL(url) {
  document.body.style.backgroundImage = `url('${url}')`;
  saveToStorage(promoThemes, setPromoThemes("backgroundImage", url));
}

/**
 * @name setDefaultThemes
 * @description Reset Syles/Themes setting to default
 */
function setDefaultThemes() {
  const inputBGImg = document.querySelector('input[name="bgImg"]:checked');
  const body = document.documentElement;
  const defaultTheme = {
    theme: "1",
    "color-blindness": "0",
    "bg-url": "",
  };
  for (const key in defaultTheme) {
    document.getElementById(key).value = defaultTheme[key];
  }
  document.body.style.backgroundImage = "";

  if (inputBGImg !== null) inputBGImg.checked = false;
  setTheme(body, 1);
}

export {
  setTheme,
  loadThemeFromStorage,
  loadBackgroundImages,
  setBGImage,
  setBGFromURL,
  setDefaultThemes,
};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Wed Jun 08 2022 19:22:36 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
