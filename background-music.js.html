<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>background-music.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#@type">@type</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addTaskButton">addTaskButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#breakReminders">breakReminders</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#cancelTask">cancelTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#checkState">checkState</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CLASSICAL_TRACKS">CLASSICAL_TRACKS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearAllTasks">clearAllTasks</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearCompletedTasks">clearCompletedTasks</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#colorChange">colorChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createCustomTaskTag">createCustomTaskTag</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CURRENT_TRACK_INDX">CURRENT_TRACK_INDX</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CURRENT_TRACKS">CURRENT_TRACKS</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#currentDeactive">currentDeactive</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getAlarm">getAlarm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getNotificationStatus">getNotificationStatus</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#hideHelp">hideHelp</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#hideSettings">hideSettings</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#inputSanitizer">inputSanitizer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#keyboardShortcut">keyboardShortcut</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadForm">loadForm</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#LONG_MINS">LONG_MINS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#onReset">onReset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#onStart">onStart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#playSound">playSound</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#POMO_MINS">POMO_MINS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#progressBar">progressBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#revealHelp">revealHelp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#revealSettings">revealSettings</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#SAVE_ON">SAVE_ON</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveTask">saveTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#selectTask">selectTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setBackgroundMusic">setBackgroundMusic</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#setCustomTime">setCustomTime</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setEditTask">setEditTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setSaveFlag">setSaveFlag</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTaskContent">setTaskContent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTrackToNext">setTrackToNext</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTrackToPrev">setTrackToPrev</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#SHORT_MINS">SHORT_MINS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showNotif">showNotif</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#timerCountdown">timerCountdown</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#timerId">timerId</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateState">updateState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateTimer">updateTimer</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">background-music.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>let 
    /** @type {number} **/ 
    CURRENT_TRACK_INDX = 0,
    /** @type {string[]} */
    CURRENT_TRACKS = [];

    // TO-DO: Find a better place to store the audio files
const
    /** @type {string[][]} */
    LOFI_TRACKS = [
        ['./audio/HoliznaCC0-Letting-Go-Of-The-Past.mp3', 'Letting Go of the Past by HoliznaCC0'],
        ['./audio/HoliznaCC0-Ghosts.mp3', 'Ghosts by HoliznaCC0'] // 1st track played
    ],
    /** @type {string[][]} */
    CLASSICAL_TRACKS = [
        ['./audio/Waltz-Tchaikovsky-Op40.mp3', 'Waltz (Tchaikovsky Op. 40) by Kevin MacLeod'] // 1st track played
    ];

/**
 * @name setBackgroundMusic
 * @function
 * @description Sets the background music based on user selection
 */
function setBackgroundMusic() {
    let bgMusic = document.getElementById('bg-music');
    let currentMix = document.getElementById('current-mix');
    let prevTrackBtn = document.getElementById('prevTrackButton');
    let nxtTrackBtn = document.getElementById('nxtTrackButton');
    let bgAudio = document.getElementById('background-audio');

    // No backround music
    if(bgMusic.options[bgMusic.selectedIndex].text == 'None') {
        currentMix.style.display = 'none';
        bgAudio.pause();
        bgAudio.style.display = 'none';
        return;
    }

    CURRENT_TRACK_INDX = 0;
    if (bgMusic.options[bgMusic.selectedIndex].text == 'Lofi') {
        CURRENT_TRACKS = LOFI_TRACKS;
    } else if (bgMusic.options[bgMusic.selectedIndex].text == 'Classical') {
        CURRENT_TRACKS = CLASSICAL_TRACKS;
    }
    currentMix.style.display = 'block';
    bgAudio.style.display = 'block';
    setTrackToNext();
    prevTrackBtn.addEventListener('click', setTrackToPrev);
    nxtTrackBtn.addEventListener('click', setTrackToNext);
    bgAudio.addEventListener('ended', setTrackToNext);
}

/**
 * @name setTrackToNext
 * @function
 * @description plays the next track
 */
function setTrackToNext() {
    let bgAudio = document.getElementById('background-audio');
    let currentTrackName = document.getElementById('track-name');
    bgAudio.pause();
    CURRENT_TRACK_INDX = (CURRENT_TRACK_INDX + 1) % CURRENT_TRACKS.length;
    bgAudio.setAttribute('src', CURRENT_TRACKS[CURRENT_TRACK_INDX][0]); 
    bgAudio.play();
    currentTrackName.innerHTML = CURRENT_TRACKS[CURRENT_TRACK_INDX][1]; // display the track name
}

/**
 * @name setTrackToPrev
 * @function
 * @description plays the previous track
 */
function setTrackToPrev() {
    let bgAudio = document.getElementById('background-audio');
    let currentTrackName = document.getElementById('track-name');
    bgAudio.pause();
    CURRENT_TRACK_INDX = CURRENT_TRACK_INDX - 1;
    if (CURRENT_TRACK_INDX &lt; 0) {
        CURRENT_TRACK_INDX = CURRENT_TRACKS.length - 1;
    }
    bgAudio.setAttribute('src', CURRENT_TRACKS[CURRENT_TRACK_INDX][0]);  
    bgAudio.play();
    currentTrackName.innerHTML = CURRENT_TRACKS[CURRENT_TRACK_INDX][1]; // display the track name
}

// export functions and variables for testing
export { setBackgroundMusic };</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Tue May 24 2022 06:40:17 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
