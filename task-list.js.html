<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>task-list.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#@type">@type</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addTaskButton">addTaskButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#breakReminders">breakReminders</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#cancelTask">cancelTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#checkState">checkState</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CLASSICAL_TRACKS">CLASSICAL_TRACKS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearAllTasks">clearAllTasks</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearCompletedTasks">clearCompletedTasks</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#colorChange">colorChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createCustomTaskTag">createCustomTaskTag</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CURRENT_TRACK_INDX">CURRENT_TRACK_INDX</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CURRENT_TRACKS">CURRENT_TRACKS</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#currentDeactive">currentDeactive</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getAlarm">getAlarm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getNotificationStatus">getNotificationStatus</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#hideHelp">hideHelp</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#hideSettings">hideSettings</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#inputSanitizer">inputSanitizer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#keyboardShortcut">keyboardShortcut</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadForm">loadForm</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#LONG_MINS">LONG_MINS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#onReset">onReset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#onStart">onStart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#playSound">playSound</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#POMO_MINS">POMO_MINS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#progressBar">progressBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#revealHelp">revealHelp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#revealSettings">revealSettings</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#SAVE_ON">SAVE_ON</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveTask">saveTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#selectTask">selectTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setBackgroundMusic">setBackgroundMusic</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#setCustomTime">setCustomTime</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setEditTask">setEditTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setSaveFlag">setSaveFlag</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTaskContent">setTaskContent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTrackToNext">setTrackToNext</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTrackToPrev">setTrackToPrev</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#SHORT_MINS">SHORT_MINS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showNotif">showNotif</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#timerCountdown">timerCountdown</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#timerId">timerId</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateState">updateState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateTimer">updateTimer</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">task-list.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** These variables are for the save task and edit task.
 * Using the same form for save task and edit task
 * SAVE_ON: adding new task
 * EDIT_ON: eddting task
 * TASK_CONTENT: the content of the current edited task
 * if a task has more content, adjust this variable
*/
const SAVE_ON = true;
const EDIT_ON = false;
let SAVE_FLAG = SAVE_ON;
let TASK_CONTENT = null;


/**
 * @name addTaskButton
 * @function
 * @description Opens or closes add-task form
 */
function addTaskButton() {
    const taskModal = document.getElementById('task-add-modal');
    taskModal.showModal();
}

/**
 * @name cancelTask
 * @function
 * @description Closes add-task form
 */
function cancelTask() {
    document.getElementById('task-name').value = '';
    setSaveFlag(SAVE_ON);
    setTaskContent(null);
    document.getElementById('task-add-modal').close();
}

/**
 * @name saveTask
 * @function
 * @description Adds new task to task list
 */
function saveTask() {
    let taskNameInput = document.getElementById('task-name');
    let taskList = document.getElementById('task-list');

    if (SAVE_FLAG === SAVE_ON) { // Save new task
        if (inputSanitizer(taskNameInput.value)){ // check for input
            alert('Please enter something!!');
            taskNameInput.focus();
            return;
        }
        
        let newTask = createCustomTaskTag(taskNameInput.value);
        taskList.appendChild(newTask);
    }
    else { // edit old task
        TASK_CONTENT.innerText = taskNameInput.value;
    }
    cancelTask();
}



/**
 * @name selectTask
 * @function 
 * @description Display selected task at top of task list
 */
function selectTask() {
    let currentTask = document.getElementById('current-task');
    const tasks = document.querySelectorAll('input[name="task-option"]');
    for (let task of tasks) {
        if (task.checked) {
            currentTask.innerText = task.value;
            break;
        }
    }
}

/**
 * @name createCustomTaskTag
 * @function
 * @description Creates a custom tag for a task
 * @param {string} taskName task name
 * @returns {HTMLLIElement} returns a HTML li tag
 */
function createCustomTaskTag(taskName) {
    let taskContainer = document.createElement('li');
    let taskLabel = document.createElement('label');
    let taskButton = document.createElement('input');
    let editButton = document.createElement('button');
    let doneButton = document.createElement('button');

    taskContainer.setAttribute('class', 'task');
    
    // When user clicks on the task, it gets crossed off
    taskButton.setAttribute('type', 'radio');
    taskButton.setAttribute('id', taskName);
    taskButton.setAttribute('class', 'task-button');
    taskButton.setAttribute('name', 'task-option');
    taskButton.addEventListener('click', function() {
        let currentTask = document.getElementById('current-task');
            if (this.checked) {
                currentTask.innerText = taskLabel.innerText;
            }
    });

    taskLabel.setAttribute('class', 'task-label');
    taskLabel.setAttribute('for', taskName);
    taskLabel.innerText = taskName;

    editButton.innerText = 'Edit';
    doneButton.innerText = 'Done';

    // Check off task when complete
    doneButton.addEventListener('click', () => {
        if (taskButton.getAttribute('done') != 'true') {
            taskButton.setAttribute('done', 'true');
        } else {
            taskButton.setAttribute('done', 'false');
        }
        
    });

    taskContainer.appendChild(taskButton);
    taskContainer.appendChild(taskLabel);
    taskContainer.appendChild(doneButton);
    taskContainer.appendChild(editButton);
    setEditTask(taskLabel, editButton);
    return taskContainer;
}

/**
 * @name setEditTask
 * @function
 * @description Set up edit task
 * @param taskLabel task name
 * @param editButton edit button of the task
 */
function setEditTask(taskLabel, editButton) {
    editButton.addEventListener('click', () => {
        loadForm(taskLabel);
    });
}

/**
 * @name loadForm
 * @function
 * @description Load content form a task to task form
 * @param content the content of the task
 */
function loadForm(content){
    let taskName = document.getElementById('task-name');
    taskName.value = content.innerText;
    document.getElementById('task-add-modal').showModal();
    setTaskContent(content);
    setSaveFlag(EDIT_ON);

}

/**
 * @name clearAllTasks
 * @function
 * @description Clears Task List
 */
function clearAllTasks() {
    let taskList = document.getElementById('task-list');
    taskList.innerHTML = '';
}

/**
 * @name clearCompletedTasks
 * @function
 * @description Clears Completed Tasks
 */
function clearCompletedTasks() {
    let taskList = document.getElementById('task-list');
    let children = taskList.children;
    for (let i = 0; i &lt; children.length; i++) {
        if (children[i].children[0].getAttribute('done') == 'true') {
            taskList.removeChild(children[i]);
            i--;
        } 
    }
}

/**
 * @name setSaveFlag
 * @function
 * @description helper function - set SAVE_FLAG for saving new task or editing task
 * @param value SAVE_ON or EDIT_ON
 */
function setSaveFlag(value) {
    SAVE_FLAG = value;
}

/**
 * @name setTaskContent
 * @function
 * @description helper function - set TASK_CONTENT for editing task
 * @param content is the task container
 */
function setTaskContent(content) {
    TASK_CONTENT = content;
}

/**
 * @name inputSanitizer
 * @function
 * @description helper function - set TASK_CONTENT for editing task
 * @param content is the task container
 */
function inputSanitizer(input) {
    if (input == '')
        return true;
    return false;
}


 // Export all functions
 export { addTaskButton, cancelTask, saveTask, createCustomTaskTag, clearAllTasks, selectTask, clearCompletedTasks };
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Sun May 22 2022 02:40:25 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
