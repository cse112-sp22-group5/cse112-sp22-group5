<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>side-nav-bar.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#@type">@type</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#breakReminders">breakReminders</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#calcTimer">calcTimer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#checkState">checkState</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CLASSICAL_TRACKS">CLASSICAL_TRACKS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearAllTasks">clearAllTasks</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearCompletedTasks">clearCompletedTasks</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#colorChange">colorChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createCustomTaskTag">createCustomTaskTag</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CURRENT_TRACK_INDX">CURRENT_TRACK_INDX</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CURRENT_TRACKS">CURRENT_TRACKS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#deleteTaskFromLocal">deleteTaskFromLocal</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#expandSideBar">expandSideBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getAlarm">getAlarm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getNotificationStatus">getNotificationStatus</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#hideSettings">hideSettings</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#inputSanitizer">inputSanitizer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isReturningUser">isReturningUser</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#keyboardShortcut">keyboardShortcut</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#loadBackgroundImages">loadBackgroundImages</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadTaskListFromLocal">loadTaskListFromLocal</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#loadThemeFromStorage">loadThemeFromStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#LONG_MINS">LONG_MINS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#minimizeSideBar">minimizeSideBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#onReset">onReset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#onStart">onStart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#playSound">playSound</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#POMO_MINS">POMO_MINS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#removeDataFromStorage">removeDataFromStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#retrieveDataFromStorage">retrieveDataFromStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#revealSettings">revealSettings</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveTask">saveTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveToStorage">saveToStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setBackgroundMusic">setBackgroundMusic</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#setBGFromURL">setBGFromURL</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#setBGImage">setBGImage</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#setCustomTime">setCustomTime</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setDefaultSettings">setDefaultSettings</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#setDefaultThemes">setDefaultThemes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setdivWidth">setdivWidth</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setIconBackGround">setIconBackGround</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setPromoThemes">setPromoThemes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setSideBar">setSideBar</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTheme">setTheme</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTrackToNext">setTrackToNext</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTrackToPrev">setTrackToPrev</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#SHORT_MINS">SHORT_MINS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showNotif">showNotif</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#storeToLocal">storeToLocal</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#timerCountdown">timerCountdown</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#timerId">timerId</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#toggleMenu">toggleMenu</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateProgress">updateProgress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateState">updateState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateTimer">updateTimer</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#worker">worker</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">side-nav-bar.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*************************** NOTE **********************************************
 * To add more side content to the side bar:
 * Under side-nav-bar add:
 *  - add  &lt;i class='menu-icon' id='&lt;new-content-go-herer-icon>'
 *         data-associated-div='&lt;new-content-go-here-div>' title='&lt;optional>'>
 *  - add &lt;img class='icon' src='link/to/your/icon' >
 * Add new side bar content div:
 *  - &lt;div class='sidebar-content' id='&lt;new-content-gohere-div'>
 * Update global variables accordingly
 ******************************************************************************/

const CONTENT_DIV = {
  "help-div": false,
  "setting-div": false,
  "tasks-div": false,
  "theme-div": false,
};
const CONTENT_ICONS = {
  "help-icon": false,
  "setting-icon": false,
  "tasks-icon": false,
  "theme-icon": false,
};

const SCREEN_SIZE = 700;
/**
 * @name setdivWidth
 * @function
 * @description Calculate sidebar content based on window width
 * @param {integer} windowWidth
 * @returns width of sidebar content in percent
 */
function setdivWidth(windowWidth) {
  if (windowWidth > 1500) return 30;
  else if (windowWidth > 1200) return 45;
  else if (windowWidth > 700) return 50;
  else return 100;
}

// Let the sidebar panel stop toggling between switching panels
// potential overlay sidebar if PANEL_Z_INDEX >= 99
let PANEL_Z_INDEX = 1;
/**
 * @name toggleMenu
 * @function
 * @description toggle side content
 * @param {string} divID id of the content
 */
function toggleMenu(divID) {
  let content_div = JSON.parse(JSON.stringify(CONTENT_DIV));
  let blurBackground = document.querySelector("#blur-background");
  if (divID == null) {
    PANEL_Z_INDEX = 1; // reset when all panels collapse
    blurBackground.classList.remove("blur-background");
  }
  if (divID != null) {
    let sideContent = document.getElementById(divID);
    const sideBarWidth = 70; // px
    let divWidth = 100; // %
    let windowWidth = window.innerWidth;
    let sideBarWidthPercentage = Math.round((sideBarWidth / windowWidth) * 100);
    divWidth = setdivWidth(windowWidth);

    blurBackground.classList.add("blur-background");
    // Only the first panel has transition
    if (PANEL_Z_INDEX >= 2) sideContent.style.transition = "0s";
    sideContent.style.visibility = "visible";
    sideContent.style.zIndex = PANEL_Z_INDEX; // the choosen panel always appear on top
    sideContent.style.width = `${divWidth - sideBarWidthPercentage}%`;
    sideContent.style.padding = `0px 0% 0px ${sideBarWidthPercentage}%`;
    PANEL_Z_INDEX++;
  }
  for (const key in content_div) {
    if (key == divID) continue;
    let sideContent = document.getElementById(key);
    sideContent.style.visibility = "hidden";
    sideContent.style.transition = "0.5s";
    sideContent.style.width = "";
    sideContent.style.padding = "0";
  }
}

/**
 * @name setIconBackGround
 * @function
 * @description Set background of the icon when it is clicked
 * @param {string} btnID button id
 */
function setIconBackGround(btnID) {
  let content_icons = JSON.parse(JSON.stringify(CONTENT_ICONS));
  if (Object.prototype.hasOwnProperty.call(content_icons, btnID))
    content_icons[btnID] = true;
  for (const key in content_icons) {
    if (content_icons[key])
      document.getElementById(key).classList.add("button-clicked");
    else document.getElementById(key).classList.remove("button-clicked");
  }
}

/**
 * @name expandSideBar
 * @function
 * @description expands the side navigation bar and set the arrow icon up
 */
function expandSideBar() {
  document.querySelector(".side-nav-bar").style.height = "100%";
  document.querySelector("#arrow-down > img").src =
    "./img/icons/arrow-up-icon.svg";
}

/**
 * @name minimizeSideBar
 * @function
 * @description minimizes the side navigation bar and set the arrow icon down
 */
function minimizeSideBar() {
  document.querySelector(".side-nav-bar").style.height = "";
  document.querySelector("#arrow-down > img").src =
    "./img/icons/arrow-down-icon.svg";

  toggleMenu(null);
}

/**
 * @name setSideBar
 * @function
 * @description depends on window side, expand or minimize the side bar
 */
function setSideBar() {
  if (window.innerWidth > SCREEN_SIZE) expandSideBar();
  else minimizeSideBar();
}

function sidebarInit() {
  // Expands sidebar based on window width
  document.querySelector("#arrow-down").addEventListener("click", () => {
    const menuStyle = document.querySelector(".side-nav-bar").style;
    if (parseInt(menuStyle.height, 10) === 0 || menuStyle.height === "") {
      expandSideBar();
    } else {
      minimizeSideBar();
    }
  });

  // Set background color for menu icons
  document.querySelectorAll(".menu-icon").forEach((elem) => {
    elem.addEventListener("click", () => {
      const id = elem.getAttribute("data-associated-div");
      const side = document.getElementById(id).offsetWidth;
      if (side === 0) {
        toggleMenu(id);
        setIconBackGround(elem.getAttribute("id"));
      } else {
        toggleMenu(null);
        setIconBackGround(null);
      }
    });
  });

  // closes side bar or panels when resizing the window
  window.addEventListener("resize", () => {
    toggleMenu(null);
    setIconBackGround(null);
    setSideBar();
  });

  /**
   * If user clicks on areas that are outside menu and panels, it closes
   */
  window.addEventListener("click", (event) => {
    const windowWidth = window.innerWidth;
    const divWidth = setdivWidth(windowWidth);
    const menuWidth = getComputedStyle(
      document.documentElement
    ).getPropertyValue("--side-bar-width");

    if ((event.clientX / windowWidth) * 100 >= divWidth) {
      toggleMenu(null);
      setIconBackGround(null);
    }

    // the click coordinate must greater than sidebar width and no panels are open
    if (event.clientX >= parseInt(menuWidth, 10) &amp;&amp; PANEL_Z_INDEX === 1) {
      setSideBar();
    }
  });

  // For touch screen devices
  window.addEventListener("touchstart", (event) => {
    const windowWidth = window.innerWidth;
    const divWidth = setdivWidth(windowWidth);
    const menuWidth = getComputedStyle(
      document.documentElement
    ).getPropertyValue("--side-bar-width");
    if ((event.touches[0].clientX / windowWidth) * 100 >= divWidth) {
      toggleMenu(null);
      setIconBackGround(null);
      setSideBar();
    }

    // the click coordinate must greater than sidebar width and no panels are open
    if (
      event.touches[0].clientX >= parseInt(menuWidth, 10) &amp;&amp;
      PANEL_Z_INDEX === 1
    ) {
      setSideBar();
    }
  });
}

export { sidebarInit, toggleMenu, setIconBackGround };
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Thu Jun 09 2022 01:02:20 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
